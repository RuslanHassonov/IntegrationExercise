<?xml version="1.0" encoding="UTF-8"?>
<!--
  Created by IntelliJ IDEA.
  User: M999RHV
  Date: 08/11/2019
  Time: 11:19
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>Main Page</title>
</h:head>

<h:body>
    <ui:composition template="template.xhtml">
        <ui:define name="content">
            <h:form id="form">

                <p:outputLabel value="Search Criteria:"/>

                <p:separator/>

                <p:panelGrid id="gridParent" columns="2" styleClass="ui-noborder">

                    <p:panelGrid id="gridLeft" columns="3">
                        <p:outputLabel value="Minimum Value:"/>
                        <p:inputText id="minVal" label="Minimum Value" value="#{orderSearchCriteria.minAmount}">
                            <p:ajax update="gridLeft" event="blur"/>
                        </p:inputText>
                        <p:message id="msgMinVal" for="minVal" display="text"/>

                        <p:outputLabel value="# Of Products:"/>
                        <p:inputText id="nrOfProd" label="Number of Products" value="#{orderSearchCriteria.numberOfProducts}"/>
                        <p:message id="msgNrOfProd" for="nrOfProd" display="text"/>

                        <p:outputLabel value="Product Name:"/>
                        <p:inputText id="prodName" label="Product Name" value="#{orderSearchCriteria.productName}"/>
                        <p:message id="msgProdName" for="prodName" display="text"/>
                    </p:panelGrid>

                    <p:panelGrid id="gridRight" columns="3">
                        <p:outputLabel value="Maximum Value:"/>
                        <p:inputText id="maxVal" label="Maximum Value" value="#{orderSearchCriteria.maxAmount}">
                            <p:ajax update="gridRight" event="blur"/>
                        </p:inputText>
                        <p:message id="msgMaxVal" for="maxVal" display="text"/>

                        <p:outputLabel value="Delivered:"/>
                        <p:selectBooleanCheckbox id="delivered" label="Delivered" value="#{orderSearchCriteria.delivered}"/>
                        <p:message id="msgDelivered" for="delivered" display="text"/>

                        <p:outputLabel value="Email Address:"/>
                        <p:inputText id="emailAddr" label="Email Address" value="#{orderSearchCriteria.email}" validatorMessage="Provided email is not correct.">
                            <f:validateRegex pattern="^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$"/>
                            <p:ajax update="gridRight" event="blur"/>
                        </p:inputText>
                        <p:message id="msgEmailAddr" for="emailAddr" display="text"/>
                    </p:panelGrid>

                    <p:row></p:row>

                    <p:row>
                        <p:commandButton value="Clear" action="#{orderSearchCriteria.clear}" immediate="true" ajax="false">
                            <p:resetInput target="gridLeft gridRight"/>
                        </p:commandButton>
                        <p:commandButton value="Search" update="foundRes"/>
                    </p:row>
                </p:panelGrid>

                <p:outputLabel value="Found Results:"/>
                <p:separator/>

                <p:dataTable id="foundRes" var="order" value="#{orderServiceImpl.searchOrders(orderSearchCriteria)}">
                    <p:column headerText="Order ID">
                        <h:outputText value="#{order.orderId}"/>
                    </p:column>
                    <p:column headerText="Customer ID">
                        <h:outputText value="#{order.customerId}"/>
                    </p:column>
                    <p:column headerText="# of Products">
                        <h:outputText value="#{order.products}"/>
                    </p:column>
                    <p:column headerText="Delivered">
                        <h:outputText value="#{order.delivered}"/>
                    </p:column>
                    <p:column headerText="Delivery Days">
                        <h:outputText value="#{order.deliveryDays}"/>
                    </p:column>
                    <p:column headerText="Total Price">
                        <h:outputText value="#{order.totalOrderPrice}"/>
                    </p:column>
                    <p:column style="width:32px;text-align: center">
                        <p:commandButton icon="pi pi-search" title="Detail">
                            <f:setPropertyActionListener value="" target=""/>
                        </p:commandButton>
                    </p:column>
                </p:dataTable>

                <br/>
                <p:spacer height="10"/>
                <p:commandButton value="Logout" action="#{loginBean.validateLogin}"/>

            </h:form>
        </ui:define>
    </ui:composition>
</h:body>

</html>